// ================ //
// header comment 1 //
// header comment 2 //
// header comment 3 //
// ================ //
//
//* To compare to other converter, we refer to "MdlxConverter 1.03 by Guesst" as [ToolA].
//
//* The order of MDX chunks should not matter, but just in case:
//  Units/Human/Arthas/Arthas_portrait.mdx
//      (VERS) -> (MODL) -> (SEQS) -> (GLBS) -> (MTLS) -> (TEXS) -> (GEOS) -> (BONE)
//      -> (LITE) -> (HELP) -> (PIVT) -> (CAMS) ->!
//  Units/Human/WaterElemental/WaterElemental.mdx
//      (VERS) -> (MODL) -> (SEQS) -> (GLBS) -> (MTLS) -> (TEXS) -> (TXAN) -> (GEOS)
//      -> (GEOA) -> (BONE) -> (HELP) -> (ATCH) -> (PIVT) -> (PRE2) -> (RIBB)
//      -> (EVTS) -> (CLID) ->!
//  Units/Creeps/WindSerpent/WindSerpent.mdx
//      (VERS) -> (MODL) -> (SEQS) -> (GLBS) -> (MTLS) -> (TEXS) -> (GEOS) -> (GEOA)
//      -> (BONE) -> (HELP) -> (ATCH) -> (PIVT) -> (PREM) -> (PRE2) -> (CAMS)
//      -> (EVTS) -> (CLID) ->!
//  Units/Human/Phoenix/PhoenixEgg.mdx
//      (VERS) -> (MODL) -> (SEQS) -> (GLBS) -> (MTLS) -> (TEXS) -> (GEOS) -> (GEOA)
//      -> (BONE) -> (HELP) -> (PIVT) -> (PRE2) -> (RIBB) -> (CAMS) ->!

Version {
    FormatVersion 800,
}
Model "ALLMIXED" {
    BoundsRadius 456.789001,
    MinimumExtent { 111.099998, 222.220001, 333.333008 },
    MaximumExtent { 444.444, 555.55603, 666.666992 },
    BlendTime 155,
}
// single line comment
Sequences 2 {/* block comment */
    Anim "Name" {
        Interval { 123, 456 },
        MoveSpeed 4.56,
        NonLooping, // line comment
        Rarity 1.23,
        BoundsRadius 7.89,
        MinimumExtent { 1.1, 2.2, 3.3 },
        MaximumExtent { 4.4, 5.5, 6.6 },
    }
    Anim "0" {
        Interval { 0, 0 },
    }
}
GlobalSequences 3 {
    Duration 0,
    Duration 123,
    Duration 123456,
}
Textures 4 {
    Bitmap {
        ReplaceableId 2,
    }
    Bitmap {
        ReplaceableId 1,
    }
    Bitmap {
        Image "hello\baby\what.blp",
        WrapWidth,
        WrapHeight,
    }
    Bitmap {
        ReplaceableId 37,
    }
}
Materials 3 {
    Material {
    }
    Material {
        Layer {
            FilterMode None,
            static TextureID 0,
        }
    }
    Material {
        PriorityPlane 99,
        ConstantColor,
        SortPrimsFarZ,
        FullResolution,
        Layer {
            FilterMode Blend,
            Unshaded,
            SphereEnvMap,
            TwoSided,
            Unfogged,
            NoDepthTest,
            NoDepthSet,
            CoordId 321,
            static TextureID 3,
            static Alpha 0.55,
        }
        Layer {
            // MPQ/MDX Animation order: Units/Human/WaterElemental/WaterElemental.mdx: "KMTA", "KMTF"
            FilterMode None,
            TVertexAnimId 123,
            TextureID 2 {
                DontInterp,
                0: 1,
                1: 0,
            }
            Alpha 1 {
                Hermite,
                0: 1,
                    InTan 0,
                    OutTan 0,
            }
        }
    }
}
TextureAnims 2 {
    TVertexAnim {
        // MPQ/MDX Animation order: Abilities/Spells/Human/ManaShield/ManaShieldCaster.mdx": "KTAT", "KTAR", "KTAS"
        Translation 1 {
            Linear,
            GlobalSeqId 0,
            0: { 0, 0, 0 },
        }
        Rotation 1 {
            Hermite,
            GlobalSeqId -11,
            0: { 0, 0, 0, 1 },
                InTan { 0, 0, 0, 0 },
                OutTan { 0, 0, 0, 0 },
        }
        Scaling 1 {
            Bezier,
            GlobalSeqId 618,
            0: { 1, 1, 1 },
                InTan { 0, 0, 0 },
                OutTan { 0, 0, 0 },
        }
    }
    TVertexAnim {
    }
}
PivotPoints 11 {
    { 0, 0, 0 },
    { 123, 456, 789 },
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 0, 0, 0 },
}
Geoset {
    Vertices 1 {
        { 0,0,0 },
    }
    Normals 1 {
        { 0,0,0 },
    }
    TVertices 1 {
        { 0,0 },
    }
    VertexGroup {
        0,
    }
    Faces 1 3 {
        Triangles {
            { 0,1,2 },
        }
    }
    Groups 1 1 {
        Matrices { 0 },
    }
    // [MaterialID] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [BoundsRadius] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [MinimumExtent] use default(0,0,0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [MaximumExtent] use default(0,0,0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
}
Geoset {
    Vertices 14 {
        { -20, 20, 40 },
        { 20, -20, 40 },
        { 20, 20, 40 },
        { -20, -20, 0 },
        { 20, -20, 0 },
        { -20, -20, 40 },
        { -20, 20, 0 },
        { -20, -20, 0 },
        { 20, 20, 0 },
        { -20, -20, 0 },
        { -20, 20, 0 },
        { -20, 20, 40 },
        { -20, -20, 40 },
        { -20, -20, 40 },
    }
    Normals 14 {
        { -0.577328, 0.577361, 0.577361 },
        { 0.577328, -0.577361, 0.577361 },
        { 0.577372, 0.577339, 0.577339 },
        { -0.577328, -0.577361, -0.577361 },
        { 0.577372, -0.577339, -0.577339 },
        { -0.577372, -0.577339, 0.577339 },
        { -0.577372, 0.577339, -0.577339 },
        { -0.577328, -0.577361, -0.577361 },
        { 0.577328, 0.577361, -0.577361 },
        { -0.577328, -0.577361, -0.577361 },
        { -0.577372, 0.577339, -0.577339 },
        { -0.577328, 0.577361, 0.577361 },
        { -0.577372, -0.577339, 0.577339 },
        { -0.577372, -0.577339, 0.577339 },
    }
    TVertices 14 {
        { 0.875, 0.5 },
        { 0.625, 0.25 },
        { 0.625, 0.5 },
        { 0.375, 0 },
        { 0.375, 0.25 },
        { 0.625, 1 },
        { 0.375, 0.75 },
        { 0.375, 1 },
        { 0.375, 0.5 },
        { 0.125, 0.25 },
        { 0.125, 0.5 },
        { 0.625, 0.75 },
        { 0.875, 0.25 },
        { 0.625, 0 },
    }
    VertexGroup {
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
    }
    Faces 1 36 {
        Triangles {
            { 0, 1, 2, 1, 3, 4, 5, 6, 7, 8, 9, 10, 2, 4, 8, 11, 8, 6, 0, 12, 1, 1, 13, 3, 5, 11, 6, 8, 4, 9, 2, 1, 4, 11, 2, 8 },
        }
    }
    Groups 2 5 {
        Matrices { 0 },
        Matrices { 0, 1, 2, 3 },
    }
    BoundsRadius 41.698601,
    MinimumExtent { -20, -20, 0 },
    MaximumExtent { 20, 20, 40 },
    Anim {
        BoundsRadius 41.698601,
        MinimumExtent { -20, -20, 0 },
        MaximumExtent { 20, 20, 40 },
    }
    Anim {
        BoundsRadius 41.698601,
        MinimumExtent { -20, -20, 0 },
        MaximumExtent { 20, 20, 40 },
    }
    Anim {
        BoundsRadius 41.698601,
        MinimumExtent { -20, -20, 0 },
        MaximumExtent { 20, 20, 40 },
    }
    MaterialID 478,
    SelectionGroup 123,
    Unselectable,
}
GeosetAnim {
    // [GeosetId] use default(0) when absent.
    // -- [ToolA] set to 1 which don't make any sense.
    // [flags] = DropShadow|UseColor = 3, but [ToolA] set it to 0x1b, why?
    DropShadow,
    static Alpha 0.5,
    static Color { 0.129412, 0.870588, 0.435294 },
}
GeosetAnim {
    GeosetId 0,
    // MPQ/MDX Animation order: Abilities/Spells/Human/InnerFire/InnerFireTarget.mdx: "KGAO", "KGAC"
    Alpha 1 {
        Bezier,
        0: 1,
            InTan 2,
            OutTan 3,
    }
    Color 1 {
        Hermite,
        0: { 1, 0.5, 0 },
            InTan { 1, 2, 3 },
            OutTan { 3, 33, 333 },
    }
}
Bone "parent" {
    ObjectId 0,
}
Bone "child" {
    ObjectId 1,
    Parent 0,
    DontInherit { Translation },
    DontInherit { Rotation },
    DontInherit { Scaling },
    Billboarded,
    BillboardedLockX,
    BillboardedLockY,
    BillboardedLockZ,
    CameraAnchored,
    // MPQ/MDX Animation order: Abilities/Spells/Demon/RainOfFire/RainOfFireTarget.mdx: "KGTR", "KGRT", "KGSC"
    Translation 3 {
        Hermite,
        0: { 0, 0, 0 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        1: { 1, 0.1, 1.1 },
            InTan { 1, 2, 3 },
            OutTan { 4, 5, 6 },
        2: { 2, 0.2, 2.2 },
            InTan { 7.8, 9, 0.1 },
            OutTan { 20, 303, 40.400002 },
    }
    Rotation 4 {
        Linear,
        10: { 0, 0, 0, 1 },
        20: { 0, 0, 0, 1 },
        30: { 0, 0, 0, 1 },
        40: { 0, 0, 0, 1 },
    }
    Scaling 7 {
        Bezier,
        110: { 1, 1, 1 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        220: { 1, 1, 1 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        330: { 1, 1, 1 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        440: { 1, 1, 1 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        550: { 1, 1, 1 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        660: { 1, 1, 1 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        770: { 1, 1, 1 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
    }
    GeosetId 210,
    GeosetAnimId 340,
}
Light "LITE" {
    ObjectId 2,
    Parent 1,
    // "Node/Flags" should be set to 0x200 for lights.
    // -- [ToolA] set it to the next uint32, which is wrong (should be light type: Omnidirectional|Directional|Ambient).
    Ambient,
    static AttenuationStart 11,
    static AttenuationEnd 44,
    static Color { 0.1, 0.2, 1.3 },
    static Intensity 22,
    static AmbColor { 1.11, 0.22, 0.33 },
    static AmbIntensity 33,
    Visibility 2 {
        Linear,
        0: 1,
        10: 12,
    }
}
Light "LITE.2 color anim" {
    ObjectId 21,
    Parent 2,
    Directional,
    // The animation order should not matter, but [ToolA] differ from us:
    //      KLAS -> KLAE -> KLAI -> KLAV -> KLAC -> KLBC -> KLBI
    // MPQ/MDX Animation order:
    //      Doodads/LordaeronSummer/Props/brazierOmni/brazierOmni.mdx: "KLAI", "KLAV"
    //      Environment/DNC/DNCAshenvale/DNCAshenValeTerrain/DNCAshenValeTerrain.mdx: "KLAC", "KLBC"
    //      Environment/DNC/DNCLordaeron/DNCLordaeronTarget/DNCLordaeronTarget.mdx: "KLAI", "KLBI"
    AttenuationStart 2 {
        Linear,
        110: 199,
        120: 16,
    }
    AttenuationEnd 2 {
        Linear,
        220: 299,
        220: 26,
    }
    Color 3 {
        Hermite,
        123: { 1, 2, 3 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        456: { 4, 5, 6 },
            InTan { 0, 0, 0 },
            OutTan { 0, 0, 0 },
        123: { 7, 8, 9 },
            InTan { 11, 22, 33 },
            OutTan { 44, 55, 66 },
    }
    Intensity 2 {
        Linear,
        330: 399,
        320: 36,
    }
    AmbColor 3 {
        Hermite,
        2123: { 2.1, 2.2, 2.3 },
            InTan { 21.0, 21.0, 21.0 },
            OutTan { 22.0, 22.0, 22.0 },
        2456: { 2.4, 2.5, 2.6 },
            InTan { 21.0, 21.0, 21.0 },
            OutTan { 22.0, 22.0, 22.0 },
        2123: { 2.7, 2.8, 2.9 },
            InTan { 21.11, 21.22, 21.33 },
            OutTan { 22.44, 22.55, 22.66 },
    }
    AmbIntensity 2 {
        Linear,
        440: 499,
        420: 46,
    }
    Visibility 1 {
        DontInterp,
        0: 1,
    }
}
Helper "HELP" {
    ObjectId 3,
}
Attachment "ATAH" {
    ObjectId 4,
    Path "path",
    Visibility 2 {
        Linear,
        0: 1,
        10: 11,
    }
}
ParticleEmitter "P1.0" {
    ObjectId 50,
}
ParticleEmitter "PERM" {
    ObjectId 5,
    // [ToolA] If both [EmitterUsesTGA] and [EmitterUsesMDL] are present, only the last one is set.
    EmitterUsesTGA,
    EmitterUsesMDL,
    static EmissionRate 111,
    static Gravity 444,
    static Longitude 555,
    static Latitude 666,
    Particle {
        static LifeSpan 222,
        static InitVelocity 333,
        Path "88.88",
    }
}
ParticleEmitter "PERM anim" {
    ObjectId 51,
    Parent 5,
    EmitterUsesTGA,
    // MPQ/MDX Animation order: no MDXs use animations other than Visibility (KPEV).
    EmissionRate 2 {
        Linear,
        1123: 1456,
        1789: 1987,
    }
    Gravity 2 {
        Linear,
        2123: 2456,
        2789: 2987,
    }
    Longitude 2 {
        Linear,
        3123: 3456,
        3789: 3987,
    }
    Latitude 2 {
        Linear,
        4123: 4456,
        4789: 4987,
    }
    Visibility 2 {
        Linear,
        50: 1.1,
        51: 0.5,
    }
    Particle {
        LifeSpan 2 {
            Linear,
            650: 61.099998,
            651: 60.5,
        }
        InitVelocity 2 {
            Linear,
            750: 71.099998,
            751: 70.5,
        }
        Path "88.88",
    }
}
ParticleEmitter2 "PRE2.0" {
    ObjectId 60,
    // [LifeSpan,Rows,Columns,HeadOrTail,TailLength,Time] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [SegmentColor] use default(1,1,1) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [Alpha] use default(255) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [ParticleScaling] use default(1.0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [LifeSpanUVAnim/DecayUVAnim/TailUVAnim/TailDecayUVAnim] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
    // [TextureID] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
}
ParticleEmitter2 "PRE2" {
    ObjectId 6,
    AlphaKey,
    SegmentColor {
        Color { 1.1, 1.2, 1.3 },
        Color { 2.1, 2.2, 2.3 },
        Color { 3.1, 3.2, 3.3 },
    },
    Alpha { 111, 222, 33 },
    ParticleScaling { 33, 44, 55 },
    LifeSpanUVAnim { 11, 22, 33 },
    DecayUVAnim { 44, 55, 66 },
    TailUVAnim { 77, 88, 99 },
    TailDecayUVAnim { 12, 34, 56 },
    Rows 78,
    Columns 90,
    Time 0.618,
    LifeSpan 14,
    TailLength 47,
    TextureID 0,
    ReplaceableId 21,
    PriorityPlane 89,
    SortPrimsFarZ,
    LineEmitter,
    ModelSpace,
    Unshaded,
    Unfogged,
    XYQuad,
    Squirt,
    Both,
    static Speed 2,
    static Variation 3,
    static Latitude 4,
    static Gravity 7,
    static EmissionRate 1.11,
    static Length 6,
    static Width 5,
}
ParticleEmitter2 "PRE2 anim" {
    ObjectId 61,
    // The animation order should not matter, but [ToolA] differ from us:
    //      KP2S -> KP2R -> KP2L -> KP2G -> KP2E -> KP2V -> KP2N -> KP2W
    // MPQ/MDX Animation order:
    //      Abilities/Spells/Human/HolyBolt/HolyBoltSpecialArt.mdx: "KP2S", "KP2L", "KP2E", "KP2V", "KP2N", "KP2W"
    //      - no MDXs use Variation(KP2R) and Gravity(KP2G).
    Speed 2 {
        Linear,
        1123: 11.23,
        1456: 14.56,
    }
    Variation 2 {
        Linear,
        2123: 21.23,
        2456: 24.559999,
    }
    Latitude 2 {
        Linear,
        3123: 31.23,
        3456: 34.560001,
    }
    Gravity 2 {
        Linear,
        4123: 41.23,
        4456: 44.560001,
    }
    EmissionRate 2 {
        Linear,
        5123: 51.23,
        5456: 54.560001,
    }
    Length 2 {
        Linear,
        7123: 71.230003,
        7456: 74.559998,
    }
    Width 2 {
        Linear,
        6123: 61.23,
        6456: 64.559998,
    }
    Visibility 2 {
        Linear,
        1010: 10.1,
        2020: 2.02,
    }
}
RibbonEmitter "RIBE.0" {
    ObjectId 70,
    // "Node/Flags" should be set to 0x4000 for RibbonEmitter.
    // -- [ToolA] set to 0x00400000 (BigEndian?), which is wrong.
    // [Alpha] use default(1) when absent.
    // -- [ToolA] set to 0.
    // [Color] use default(1,1,1) when absent.
    // -- [ToolA] set to (0,0,0).
    // [EmissionRate/LifeSpan/Gravity/Rows/Columns/MaterialID] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value, which is definitely wrong.
}
RibbonEmitter "RIBE" {
    ObjectId 7,
    EmissionRate 33,
    LifeSpan 44,
    Gravity 55,
    Rows 11,
    Columns 22,
    MaterialID 1,
    static HeightAbove 123,
    static HeightBelow 45,
    static Alpha 0.78,
    static Color { 0.11, 0.22, 0.33 },
}
RibbonEmitter "RIBE anim" {
    ObjectId 71,
    // The animation order should not matter, but [ToolA] differ from us:
    //      KRHA -> KRHB -> KRAL -> KRCO -> KRVS -> KRTX
    // MPQ/MDX Animation order: only 1 MDX use more than 1 animations:
    //      Abilities/Spells/Human/Resurrect/Resurrecttarget.mdx: "KRHA", "KRHB"
    HeightAbove 2 {
        DontInterp,
        1123: 412.299988,
        1456: 445.600006,
    }
    HeightBelow 2 {
        DontInterp,
        2123: 512.299988,
        2456: 545.599976,
    }
    Alpha 2 {
        DontInterp,
        3123: 612.299988,
        3456: 645.599976,
    }
    Color 2 {
        Bezier,
        123: { 0.1, 0.2, 0.3 },
            InTan { 0.2, 0.3, 0.4 },
            OutTan { 0.3, 0.4, 0.5 },
        456: { 0.4, 0.5, 0.6 },
            InTan { 0.5, 0.6, 0.7 },
            OutTan { 0.6, 0.7, 0.8 },
    }
    Visibility 2 {
        Linear,
        3010: 310.100006,
        3020: 32.02,
    }
}
EventObject "SNDxASHP" {
    ObjectId 8,
    EventTrack 3 {
        1,
        22,
        333,
    }
}
CollisionShape "BOXy" {
    ObjectId 9,
    Box,
    Vertices 2 {
        { 11, 22, 33 },
        { 44, 55, 66 },
    }
}
CollisionShape "SPRE" {
    ObjectId 10,
    Parent 9,
    Sphere,
    Vertices 1 {
        { 66, 77, 88 },
    }
    BoundsRadius 999,
}
Camera "Name" {
    // [Position] use default(0,0,0) when absent.
    // -- [ToolA] set to some random or uninitialized value which is definitely wrong.
    // [FieldOfView] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value which is definitely wrong.
    // [FarClippingPlane] use default(0) when absent.
    // -- [ToolA] set to some random or uninitialized value which is definitely wrong.
}
Camera "Camera01" {
    Position { 141.421005, 455.100006, 426.183014 },
    FieldOfView 0.785398,
    FarClip 10000,
    NearClip 1,
    // [ToolA] convert 'Translation' to "KTTR" and 'Target/Translation' to "KCTR",
    // -- which I believe is a bug. (should be "KCTR" and "KTTR")
    // MPQ/MDX Animation order: Buildings/Human/HumanTower/HumanTower.mdx: "KCTR", "KCRL", "KTTR"
    Translation 2 {
        Linear,
        123: { 1, 2, 3 },
        456: { 4, 5, 6 },
    }
    Target {
        Position { 66.660004, 77.800003, 888 },
        Translation 2 {
            Linear,
            123: { 11, 22, 33 },
            456: { 44, 55, 66 },
        }
    }
}
/// ========= ///
// *********** //
// end of file //
